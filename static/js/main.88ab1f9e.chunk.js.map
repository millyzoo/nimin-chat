{"version":3,"sources":["constants/globalStyle.js","components/Footer/Footer.js","constants/breakpoint.js","constants/mainStyle.js","contexts.js","utils.js","pages/HomePage/HomePage.js","config.js","pages/ModePage/ModePage.js","WebAPI.js","pages/ChatPage/ChatPage.js","App.js","index.js"],"names":["GlobalStyle","createGlobalStyle","FooterContainer","styled","footer","AuthorLink","a","Footer","href","target","rel","MEDIA_QUERY_SM","Wrapper","div","SubmitButton","input","AuthContext","createContext","USER_NAME","Form","form","Title","h1","InputContainer","InputErrorText","span","Input","AvatarContainer","OptionButton","Option","label","Avatar","props","background","HomePage","useState","errorMessages","setErrorMessages","useContext","setIsUserLogin","currentUser","setCurrentUser","history","useHistory","handleUsernameChange","e","name","username","value","avatar","onSubmit","user","preventDefault","localStorage","setItem","JSON","stringify","push","htmlFor","id","placeholder","onChange","type","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","database","Container","ModeLink","Link","Mode","ModalBackground","ModalContent","ModalCloseButton","ModalTitle","p","ModePage","isJoinModalOpen","setIsJoinModalOpen","isCreateModalOpen","setIsCreateModalOpen","createRoomId","setCreateRoomId","joinRoomId","setJoinRoomId","reference","ref","orderByChild","isUserLogin","useEffect","handleJoinModalClick","handleCreateModalClick","to","onClick","equalTo","once","snapshot","val","roomID","set","ChatContainer","Chat","ChatName","Sidebar","aside","isSidebarOpen","CloseSidebarButton","MyselfInfo","MyselfImages","ul","li","Content","section","ChatContent","UserJoinChat","SelfMessage","SelfMessageContent","MessageContentContainer","UserImages","UserInfo","UserName","UserMessage","MessageContent","MessageContentTime","InputField","Emoji","SendButton","button","ChatPage","setIsSidebarOpen","setLatestMessage","messages","setMessages","currentMessage","setCurrentMessage","roomId","useParams","userData","parse","getItem","on","objectResponse","arrayData","Object","keys","map","_","getMessageData","writeOnlineState","isSystemMessage","enterChatRoom","message","Date","timestamp","toLocaleTimeString","hour","minute","hour12","sendMessage","window","scrollTo","document","body","scrollHeight","App","Provider","exact","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.88ab1f9e.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  html {\n    font-size: 16px;\n  }\n\n  body {\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    font-family: 'Noto Sans TC', Open-Sans, Arial;\n    font-weight: 400;\n    background: #e9e9e9;\n    color: #505050;\n    transition: all 0.5s linear;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  h1, p {\n    margin: 0;\n  }\n\n  input,\n  input[type=\"button\"],\n  input[type=\"submit\"],\n  input[type=\"file\"],\n  input[type=\"reset\"],\n  button,\n  textarea,\n  select {\n    outline: none;\n    letter-spacing: 1px;\n    appearance: none;\n    outline-style: none;\n    -webkit-appearance: none;\n  }\n\n  input, textarea {\n    resize: none;\n  }\n`;\n\nexport default GlobalStyle;\n","import styled from \"styled-components\";\n\nconst FooterContainer = styled.footer`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  height: 60px;\n  color: #b6b6b6;\n  font-size: 0.875rem;\n`;\n\nconst AuthorLink = styled.a`\n  margin-left: 5px;\n  color: #b6b6b6;\n  text-decoration: none;\n  transition: 0.3s;\n\n  &:hover {\n    color: #555555;\n  }\n`;\n\nexport default function Footer() {\n  return (\n    <FooterContainer>\n      <p>Made with by </p>\n      <AuthorLink href=\"https://github.com/milyzoo\" target=\"_blank\" rel=\"noreferrer\">@milyzoo</AuthorLink>\n      <p>.</p>\n    </FooterContainer>\n  );\n}\n","export const MEDIA_QUERY_SM = \"@media (max-width: 575px)\";\nexport const MEDIA_QUERY_MD = \"@media (max-width: 768px)\";\nexport const MEDIA_QUERY_LG = \"@media (max-width: 1280px)\";\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 60px); /* 減去 footer + header */\n`;\n\nexport const SubmitButton = styled.input`\n  padding: 12px;\n  border-radius: 50px;\n  width: 100%;\n  border: none;\n  background-color: #00b9a3;\n  color: #ffffff;\n  font-size: 1.125rem;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    background-color: #00ad98;\n  }\n`;\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);","const USER_NAME = \"user\";\n\nexport const setUser = (user) => {\n  localStorage.setItem(USER_NAME, JSON.stringify(user));\n};\n\nexport const getUser = () => {\n  return localStorage.getItem(USER_NAME);\n};\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { MEDIA_QUERY_SM } from '../../constants/breakpoint';\nimport { Wrapper, SubmitButton } from '../../constants/mainStyle';\nimport { AuthContext } from '../../contexts'\nimport { setUser } from '../../utils'\n\nconst Form = styled.form`\n  padding: 40px;\n  width: 400px;\n  background-color: #f5f5f5;\n  border-radius: 20px;\n  box-shadow: 0 10px 60px rgba(0, 0, 0, 0.05);\n\n  ${MEDIA_QUERY_SM} {\n    width: 90%;\n  }\n`\n\nconst Title = styled.h1`\n  margin-bottom: 40px;\n  color: #00b9a3;\n  font-size: 1.875rem;\n  font-weight: 900;\n  text-align: center;\n`\n\nconst InputContainer = styled.div`\n  margin: 0 0 30px 0;\n`\n\nconst InputErrorText = styled.span`\n  margin-left: 20px;\n  color: #d62f39;\n`\n\nconst Input = styled.input`\n  margin-top: 10px;\n  padding: 10px;\n  width: 100%;\n  height: 45px;\n  border: 1px solid transparent;\n  border-radius: 8px;\n  font-size: 1rem;\n  color: #505050;\n  background-color: #ffffff;\n  transition: all 0.3s;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n\n  &:focus {\n    border: 1px solid #00b9a3;\n  }\n`\n\nconst AvatarContainer = styled.div`\n  display: flex;\n  margin: 10px 0 30px 0;\n`\n\nconst OptionButton = styled.div`\n  position: relative;\n  width: 14px;\n  height: 14px;\n  border: 2px solid #aaaaaa;\n  border-radius: 50%;\n  cursor: pointer;\n\n  &::after {\n    position: absolute;\n    content: \"\";\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    background-color: #aaaaaa;\n    transition: all 0.3s;\n    opacity: 0;\n  }\n`\n\nconst Option = styled.label`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & + & {\n    margin-left: 30px;\n  }\n\n  input:checked + ${OptionButton}::after {\n    opacity: 1;\n  }\n`\n\nconst Avatar = styled.div`\n  margin-bottom: 10px;\n  width: 30px;\n  height: 30px;\n  background-color: ${props => props.background};\n  border-radius: 50%;\n`\n\nexport default function HomePage() {\n  const [errorMessages, setErrorMessages] = useState(\"\");\n  const { setIsUserLogin, currentUser, setCurrentUser } = useContext(AuthContext);\n  const history = useHistory();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!currentUser.username && !currentUser.avatar) {\n      setErrorMessages('資料填寫不齊全')\n      return\n    } else if (!currentUser.username) {\n      setErrorMessages('尚未填寫名字')\n      return\n    } else if (!currentUser.avatar) {\n      setErrorMessages('尚未選擇頭貼')\n      return\n    }\n    setErrorMessages(\"\")\n    setUser(currentUser)\n    setIsUserLogin(true)\n    history.push(\"/mode\");\n  }\n\n  const handleUsernameChange = e => {\n    switch (e.target.name) {\n      case \"username\":\n        setCurrentUser({\n          ...currentUser,\n          username: e.target.value,\n        })\n        setErrorMessages(\"\")\n        break;\n      case \"avatar\":\n        setCurrentUser({\n          ...currentUser,\n          avatar: e.target.value\n        })\n        setErrorMessages(\"\")\n        break;\n      default:\n        break;\n    }\n  }\n\n  return (\n    <Wrapper>\n      <Form onSubmit={handleSubmit}>\n        <Title>NIMIN CHAT</Title>\n        <InputContainer>\n          <label htmlFor=\"username\">\n            名字\n            {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n          </label>\n          <Input id=\"username\" name=\"username\" placeholder=\"請填寫名字\" onChange={handleUsernameChange} />\n        </InputContainer>\n        <p>選擇頭貼</p>\n        <AvatarContainer>\n          <Option htmlFor=\"option1\">\n            <Avatar background=\"#e0969b\" />\n            <input type=\"radio\" name=\"avatar\" id=\"option1\" value=\"#e0969b\" onChange={handleUsernameChange} />\n            <OptionButton />\n          </Option>\n          <Option htmlFor=\"option2\">\n            <Avatar background=\"#b59a92\" />\n            <input type=\"radio\" name=\"avatar\" id=\"option2\" value=\"#b59a92\" onChange={handleUsernameChange} />\n            <OptionButton />\n          </Option>\n          <Option htmlFor=\"option3\">\n            <Avatar background=\"#77bce2\" />\n            <input type=\"radio\" name=\"avatar\" id=\"option3\" value=\"#77bce2\" onChange={handleUsernameChange} />\n            <OptionButton />\n          </Option>\n          <Option htmlFor=\"option4\">\n            <Avatar background=\"#93a5d2\" />\n            <input type=\"radio\" name=\"avatar\" id=\"option4\" value=\"#93a5d2\" onChange={handleUsernameChange} />\n            <OptionButton />\n          </Option>\n        </AvatarContainer>\n        <SubmitButton type=\"submit\" value=\"進入聊天室\" />\n      </Form>\n    </Wrapper>\n  );\n}","// import firebase from 'firebase'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\"; // Realtime Database\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDXEot_nTMfTpJVR4lfaCuqm74Uz8laHCQ\",\n  authDomain: \"nimin-chat.firebaseapp.com\",\n  databaseURL: \"https://nimin-chat-default-rtdb.firebaseio.com\",\n  projectId: \"nimin-chat\",\n  storageBucket: \"nimin-chat.appspot.com\",\n  messagingSenderId: \"612479268903\",\n  appId: \"1:612479268903:web:6bd28ec327da23617bf602\",\n};\n\nfirebase.initializeApp(firebaseConfig); // 初始化 Firebase\n// const db = firebase.firestore(); // 取得資料庫\nconst database = firebase.database(); // 取得資料庫\n\nexport default database;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { MEDIA_QUERY_SM } from \"../../constants/breakpoint\";\nimport { Wrapper, SubmitButton } from \"../../constants/mainStyle\";\nimport { Link } from \"react-router-dom\";\nimport { FaUsers as UsersIcon, FaDoorOpen as DoorIcon } from 'react-icons/fa';\nimport { BiMessageAdd as MessageAddIcon } from 'react-icons/bi';\nimport { IoIosClose as CloseIcon } from 'react-icons/io';\nimport { useHistory } from \"react-router-dom\";\nimport { addChatRoom } from '../../WebAPI'\nimport firebase from 'firebase';\nimport { AuthContext } from '../../contexts';\n\nconst Container = styled.div`\n  width: 280px;\n`;\n\nconst ModeLink = styled(Link)`\n  display: block;\n  text-decoration: none;\n`\n\nconst Mode = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 40px;\n  padding: 30px 0;\n  background-color: #fff;\n  border-radius: 20px;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  &:hover {\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n    background-color: #00b9a3;\n    color: #ffffff;\n  }\n\n  svg {\n    width: auto;\n    height: 40px;\n  }\n`\n\nconst ModalBackground = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n`\n\nconst ModalContent = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 50px 80px;\n  width: 33%;\n  min-width: 480px;\n  background-color: #ffffff;\n  border-radius: 20px;\n  box-shadow: 0 0 50px 0 rgba(0, 0, 0, 0.1);\n\n  ${MEDIA_QUERY_SM} {\n    padding: 40px;\n    width: 90%;\n    min-width: auto;\n  }\n`\n\nconst ModalCloseButton = styled.div`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: 2px solid #00b9a3;\n  color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &:hover {\n    background-color: #00b9a3;\n    color: #ffffff;\n  }\n`\n\nconst ModalTitle = styled.p`\n  margin-bottom: 40px;\n  background-color: #ffffff;\n  color: #00b9a3;\n  font-size: 1.5rem;\n  font-weight: 500;\n  text-align: center;\n`\n\nconst InputContainer = styled.div`\n  margin-bottom: 40px;\n`\n\nconst InputErrorText = styled.span`\n  margin-left: 20px;\n  color: #d62f39;\n`\n\nconst Input = styled.input`\n  margin-top: 10px;\n  padding: 10px;\n  width: 100%;\n  height: 45px;\n  border: 1px solid transparent;\n  border-radius: 8px;\n  font-size: 1rem;\n  color: #505050;\n  background-color: #f5f5f5;\n  transition: 0.3s;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n\n  &:focus {\n    border: 1px solid #00b9a3;\n  }\n`\n\nexport default function ModePage() {\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState(false)\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\n  const [createRoomId, setCreateRoomId] = useState(\"\")\n  const [joinRoomId, setJoinRoomId] = useState(\"\")\n  const [errorMessages, setErrorMessages] = useState(\"\");\n  const history = useHistory();\n  const reference = firebase.database().ref('chats').orderByChild('roomID')\n  const { isUserLogin } = useContext(AuthContext)\n\n  useEffect(() => {\n    if (!isUserLogin) {\n      history.push(\"/\");\n      return\n    }\n  }, [history, isUserLogin])\n\n  const handleJoinModalClick = () => {\n    setIsJoinModalOpen(!isJoinModalOpen);\n    setErrorMessages(\"\")\n  };\n\n  const handleCreateModalClick = () => {\n    setIsCreateModalOpen(!isCreateModalOpen);\n    setErrorMessages(\"\")\n  };\n\n  const handleJoinRoomSubmit = e => {\n    e.preventDefault();\n\n    reference.equalTo(joinRoomId).once('value', (snapshot) => {\n      if (!joinRoomId) {\n        setErrorMessages('尚未輸入房間編號')\n        return\n      }\n\n      if (!snapshot.val()) {\n        setErrorMessages('此房間不存在')\n        return\n      }\n      \n      history.push(`/chat/${joinRoomId}`);\n    })\n  }\n\n  const handleCreateRoomSubmit = e => {\n    e.preventDefault();\n\n    reference.equalTo(createRoomId).once('value', (snapshot) => {\n      if (!createRoomId) {\n        setErrorMessages('尚未輸入房間編號')\n        return\n      }\n\n      if (snapshot.val()) {\n        setErrorMessages('此房間已存在')\n        return\n      }\n      \n      addChatRoom(createRoomId)\n      history.push(`/chat/${createRoomId}`);\n    })\n  }\n  \n  const handleCreateRoomIDChange = e => {\n    setCreateRoomId(e.target.value)\n  }\n  \n  const handleJoinRoomIDChange = e => {\n    setJoinRoomId(e.target.value)\n  }\n\n  return (\n    <Wrapper>\n      <Container>\n        <ModeLink to=\"/chat/lobby\">\n          <Mode>\n            <UsersIcon />\n            聊天大廳\n          </Mode>\n        </ModeLink>\n        <Mode onClick={handleJoinModalClick}>\n          <DoorIcon />\n          加入房間\n        </Mode>\n        { isJoinModalOpen && (\n          <>\n            <ModalBackground onClick={handleJoinModalClick} />\n            <ModalContent>\n              <ModalCloseButton onClick={handleJoinModalClick}><CloseIcon /></ModalCloseButton>\n              <ModalTitle>加入房間</ModalTitle>\n              <form onSubmit={handleJoinRoomSubmit}>\n                <InputContainer>\n                  <label htmlFor=\"room-id\">\n                    房間編號\n                    {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n                  </label>\n                  <Input id=\"room-id\" placeholder=\"請輸入房間編號\" onChange={handleJoinRoomIDChange} />\n                </InputContainer>\n                <SubmitButton type=\"submit\" value=\"加入\" />\n              </form>\n            </ModalContent>\n          </>\n        )}\n        <Mode onClick={handleCreateModalClick}>\n          <MessageAddIcon />\n          創建房間\n        </Mode>\n        { isCreateModalOpen && (\n          <>\n            <ModalBackground onClick={handleCreateModalClick} />\n            <ModalContent>\n              <ModalCloseButton onClick={handleCreateModalClick}><CloseIcon /></ModalCloseButton>\n              <ModalTitle>創建房間</ModalTitle>\n              <form onSubmit={handleCreateRoomSubmit}>\n                <InputContainer>\n                  <label htmlFor=\"room-id\">\n                    房間編號\n                    {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n                  </label>\n                  <Input id=\"room-id\" placeholder=\"請輸入房間編號\" onChange={handleCreateRoomIDChange} />\n                </InputContainer>\n                <SubmitButton type=\"submit\" value=\"建立\" />\n              </form>\n            </ModalContent>\n          </>\n        )}\n      </Container>\n    </Wrapper>\n  );\n}","import database from './config';\n\nexport const addChatRoom = (roomID) => {\n  database.ref(`chats/${roomID}`).set({\n    roomID\n  });\n}\n  \nexport const enterChatRoom = (roomId, username, isSystemMessage) => {\n  database.ref(`messages/${roomId}`).push({\n    id: {  \n      '.sv':'timestamp'\n    },\n    username,\n    isSystemMessage,\n  });\n}\n  \nexport const sendMessage = ({ roomId, message, username, avatar, isSystemMessage }) => {\n  database.ref(`messages/${roomId}`).push({\n    id: {  \n      '.sv':'timestamp'\n    },\n    message,\n    timestamp: {  \n      '.sv':'timestamp'\n    },\n    username,\n    avatar,\n    isSystemMessage,\n  });\n}\n  \nexport const writeOnlineState = (roomId, username) => {\n  database.ref(`onlineUser/${roomId}`).push({\n    username,\n  });\n}\n","import React, { useState, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { MEDIA_QUERY_SM } from \"../../constants/breakpoint\";\nimport { Wrapper } from \"../../constants/mainStyle\";\nimport { FiSmile as EmojiIcon } from 'react-icons/fi';\nimport { IoCloseCircle as ChatCloseIcon, IoSend as SendIcon } from \"react-icons/io5\";\nimport { RiArrowLeftSLine as ArrowLeftIcon } from \"react-icons/ri\";\nimport { AuthContext } from '../../contexts';\nimport { useParams, useHistory } from \"react-router-dom\";\nimport database from '../../config';\nimport { getUser } from '../../utils'\nimport { enterChatRoom, sendMessage, writeOnlineState } from '../../WebAPI'\n\nconst ChatContainer = styled.div`\n  margin-top: 40px;\n  padding: 20px;\n  width: 100%;\n  max-width: 840px;\n  height: 650px;\n`\n\nconst Chat = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  padding: 20px;\n  height: 100%;\n  background-color: #f5f5f5;\n  border-radius: 20px;\n`\n\nconst ChatName = styled.div`\n  position: absolute;\n  top: -40px;\n  left: 20px;\n  display: flex;\n  align-items: center;\n  padding: 0 20px 0 70px;\n  line-height: 40px;\n  background-color: #cccccc;\n  border-radius: 10px 10px 0 0;\n  font-size: 0.9375rem;\n  \n  svg {\n    margin-left: 50px;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    transition: 0.3s;\n\n    &:hover {\n      color: #d62f39;\n    }\n  }\n`\n\nconst Sidebar = styled.aside`\n  position: relative;\n  padding: 20px;\n  width: 180px;\n  height: 100%;\n  background-color: #fff;\n  border-radius: 15px;\n  display: ${props => props.isSidebarOpen ? \"block\" : \"none\"};\n\n  ${MEDIA_QUERY_SM} {\n    display: ${props => props.isSidebarOpen ? \"none\" : \"block\"};\n    width: ${props => props.isSidebarOpen ? \"0\" : \"100%\"};\n  }\n`\n\nconst CloseSidebarButton = styled.div`\n  position: absolute;\n  left: 0;\n  bottom: 75px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 30px;\n  border-radius: 0 50% 50% 0;\n  font-size: 1.375rem;\n  color: #505050;\n  background-color: #cccccc;\n  cursor: pointer;\n  z-index: 1;\n\n  svg {\n    transition: 0.3s;\n    transform: ${props => props.isSidebarOpen ? \"rotate(0)\" : \"rotate(180deg)\" };\n  }\n`\n\nconst MyselfInfo = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e9e9e9;\n`\n\nconst OnlineUsers = styled.p`\n  font-size: 0.815rem;\n  color: #aaaaaa;\n`\n\nconst UserList = styled.ul`\n  margin: 20px 0 0 0;\n  padding: 0;\n  list-style: none;\n  font-size: 0.9375rem;\n`\n\nconst User = styled.li`\n  position: relative;\n  padding-left: 13px;\n\n  &::before {\n    position: absolute;\n    content: \"\";\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background-color: #00b9a3;\n  }\n\n  & + & {\n    margin-top: 10px;\n  }\n`\n\nconst MyselfImages = styled.div`\n  width: 18px;\n  height: 18px;\n  margin-right: 8px;\n  background-color: #b59a92;\n  border-radius: 50%;\n`\n\nconst Content = styled.section`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: ${props => props.isSidebarOpen ? \"calc(100% - 200px)\" : \"100%\"};\n\n  ${MEDIA_QUERY_SM} {\n    display: ${props => props.isSidebarOpen ? \"flex\" : \"none\"};\n    width: ${props => props.isSidebarOpen ? \"100%\" : \"0\"};\n  }\n`\n\nconst ChatContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 10px;\n  height: calc(100% - 70px);\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n \n  &::-webkit-scrollbar-track {\n    background-color: #e9e9e9;\n    border-radius: 100px;\n  }\n \n  &::-webkit-scrollbar-thumb {\n    background-color: #cccccc;\n    border-radius: 100px;\n  }\n`\n\nconst UserJoinChat = styled.p`\n  display: inline-block;\n  padding: 5px 15px;\n  background-color: #e9e9e9;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  margin: 7.5px 0;\n`\n\nconst SelfMessage = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  margin: 7.5px 0 7.5px auto;\n  max-width: 45%;\n\n  ${MEDIA_QUERY_SM} {\n    max-width: 85%;\n  }\n`\n\nconst SelfMessageContent = styled.p`\n  padding: 7px 15px;\n  margin-left: 10px;\n  max-width: calc(100% - 64px);\n  height: fit-content;\n  background-color: #00b9a3;\n  color: #ffffff;\n  border-radius: 10px 0 10px 10px;\n  word-wrap: break-word;\n`\n\nconst MessageContentContainer = styled.div`\n    display: flex;\n    margin: 7.5px auto 7.5px 0;\n    max-width: 45%;\n\n  ${MEDIA_QUERY_SM} {\n    width: 100%;\n    max-width: 85%;\n  }\n`\n\nconst UserImages = styled.div`\n  margin-right: 10px;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  background-color: ${props => props.background};\n`\n\nconst UserInfo = styled.div`\n  width: calc(100% - 40px);\n`\n\nconst UserName = styled.p`\n  margin-bottom: 5px;\n  color: #aaaaaa;\n  font-size: 0.8125rem;\n`\n\nconst UserMessage = styled.div`\n  display: flex;\n  align-items: flex-end;\n`\n\nconst MessageContent = styled.p`\n  margin-right: 10px;\n  padding: 7px 15px;\n  max-width: calc(100% - 64px);\n  background-color: #fff;\n  border-radius: 0 10px 10px 10px;\n  word-wrap: break-word;\n`\n\nconst MessageContentTime = styled.p`\n  font-size: 0.75rem;\n  color: #aaaaaa;\n`\n\nconst InputField = styled.form`\n  position: relative;\n`\n\nconst Input = styled.input`\n  border: transparent;\n  padding: 0 75px 0 55px;\n  width: 100%;\n  height: 50px;\n  border-radius: 50px;\n  background-color: #fff;\n  font-size: 1rem;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n`\n\nconst Emoji = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 20px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  \n  svg {\n    width: 100%;\n    color: #cccccc;\n  }\n`\n\nconst SendButton = styled.button`\n  position: absolute;\n  top: 50%;\n  right: 20px;\n  transform: translateY(-50%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: none;\n  background-color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  svg {\n    color: #fff;\n  }\n\n  &:hover {\n    background-color: #00ad98;\n  }\n`\n\nexport default function ChatPage() {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [latestmessage, setLatestMessage] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [currentMessage, setCurrentMessage] = useState([]);\n  // const [onlineUserList, setOnlineUserList] = useState([]);\n  const { isUserLogin, currentUser } = useContext(AuthContext);\n  const { roomId } = useParams();\n  const history = useHistory();\n  const userData = JSON.parse(getUser('user'));\n  \n  const getMessageData = (roomId) => {\n    database.ref(`messages/${roomId}`).on('value', (snapshot) => {\n      const objectResponse = snapshot.val();\n      if (objectResponse) {\n        const arrayData = Object.keys(objectResponse).map((_) => objectResponse[_]);\n        setLatestMessage(arrayData)\n        setMessages(arrayData)\n      }\n    })\n  }\n  \n  // const getOnlineUser = (roomId) => {\n  //   database.ref(`onlineUser/${roomId}`).limitToLast(1).on('value', (snapshot) => {\n  //     const objectResponse = snapshot.val();\n  //     if (objectResponse) {\n  //       const arrayData = Object.keys(objectResponse).map((_) => objectResponse[_]);\n  //       console.log(arrayData)\n  //       setOnlineUserList([\n  //         ...onlineUserList,\n  //         arrayData[0]\n  //       ])\n  //     }\n  //   })\n  // }\n\n  useEffect(() => {\n    if (!isUserLogin) {\n      history.push(\"/\");\n      return\n    }\n\n    getMessageData(roomId)\n    writeOnlineState(roomId, userData.username)\n    enterChatRoom(roomId, userData.username, true)\n  }, [history, isUserLogin, roomId, userData.username, userData.avatar])\n\n  const handleSidebarOpen = () => {\n    setIsSidebarOpen(!isSidebarOpen)\n  }\n\n  const handleInputChange = e => {\n    setCurrentMessage(e.target.value)\n  }\n\n  const handleMessageSubmit = e => {\n    e.preventDefault();\n    if (!currentMessage) return\n\n    sendMessage({ \n      roomId, \n      message: currentMessage, \n      username: userData.username,\n      avatar: userData.avatar,\n      isSystemMessage: false\n    })\n\n    window.scrollTo(0, document.body.scrollHeight)\n  }\n\n  return (\n    <Wrapper>\n      <ChatContainer>\n        <Chat>\n          <ChatName>\n            { roomId === 'lobby' ? '聊天大廳' : `房間編號 ${roomId}`}\n            <ChatCloseIcon />\n          </ChatName>\n          <Sidebar isSidebarOpen={isSidebarOpen}>\n            <MyselfInfo>\n              <MyselfImages />\n              {userData.username}\n            </MyselfInfo>\n            {/* <OnlineUsers>線上人數 {onlineUserList.length} 人</OnlineUsers>\n            <UserList>\n              { onlineUserList.map(user => <User>{user.username}</User>)}\n            </UserList> */}\n          </Sidebar>\n          <CloseSidebarButton onClick={handleSidebarOpen} isSidebarOpen={isSidebarOpen}>\n            <ArrowLeftIcon />\n          </CloseSidebarButton>\n          <Content isSidebarOpen={isSidebarOpen}>\n            <ChatContent>\n              { messages && messages.map(message => {\n                if (message.isSystemMessage) return (<UserJoinChat key={message.id}>{message.username + ' 加入聊天室'} </UserJoinChat>)\n                return currentUser.username === message.username && !message.isSystemMessage ? (\n                  <SelfMessage key={message.id}>\n                    <MessageContentTime>{new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12: true})}</MessageContentTime>\n                    <SelfMessageContent>{message.message}</SelfMessageContent>\n                  </SelfMessage>\n                ):(\n                  <MessageContentContainer key={message.id}>\n                      <UserImages background={message.avatar} />\n                      <UserInfo>\n                        <UserName>{message.username}</UserName>\n                        <UserMessage>\n                          <MessageContent>{message.message}</MessageContent>\n                          <MessageContentTime>{new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12: true})}</MessageContentTime>\n                        </UserMessage>\n                      </UserInfo>\n                 </MessageContentContainer>\n                )\n              })}\n            </ChatContent>\n            <InputField onSubmit={handleMessageSubmit}>\n              <Emoji>\n                <EmojiIcon />\n              </Emoji>\n              <Input placeholder=\"輸入想說的話\" onChange={handleInputChange} />\n              <SendButton type=\"submit\">\n                <SendIcon />\n              </SendButton>\n            </InputField>\n          </Content>\n        </Chat>\n      </ChatContainer>\n    </Wrapper>\n  );\n}","import React, { useState } from \"react\";\nimport GlobalStyle from \"./constants/globalStyle\";\nimport Footer from \"./components/Footer\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { HomePage, ModePage, ChatPage } from \"./pages\";\nimport { AuthContext } from \"./contexts\";\n\nexport default function App() {\n  const [isUserLogin, setIsUserLogin] = useState(false);\n  const [currentUser, setCurrentUser] = useState({\n    username: \"\",\n    avatar: \"\",\n  });\n\n  return (\n    <AuthContext.Provider value={{ isUserLogin, setIsUserLogin, currentUser, setCurrentUser }}>\n      <HashRouter>\n        <GlobalStyle />\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/mode\" component={ModePage} />\n          <Route path=\"/chat/:roomId\" component={ChatPage} />\n        </Switch>\n        <Footer />\n      </HashRouter>\n    </AuthContext.Provider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}