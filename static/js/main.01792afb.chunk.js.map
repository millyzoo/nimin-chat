{"version":3,"sources":["constants/globalStyle.js","components/Footer/Footer.js","constants/breakpoint.js","constants/mainStyle.js","contexts.js","utils.js","components/AvatarOptionInput/AvatarOptionInput.js","pages/HomePage/HomePage.js","config.js","pages/ModePage/ModePage.js","WebAPI.js","pages/ChatPage/ChatPage.js","App.js","index.js"],"names":["GlobalStyle","createGlobalStyle","FooterContainer","styled","footer","AuthorLink","a","Footer","href","target","rel","MEDIA_QUERY_SM","Wrapper","div","SubmitButton","input","AuthContext","createContext","USER_NAME","scrollToTop","window","scrollTo","Avatar","props","background","AvatarInput","OptionButton","Option","label","AvatarOptionInput","id","handleUserInfoChange","htmlFor","type","name","value","onChange","Form","form","Title","h1","InputContainer","InputErrorText","span","Input","AvatarContainer","HomePage","useState","errorMessages","setErrorMessages","useContext","setIsUserLogin","currentUser","setCurrentUser","history","useHistory","e","username","avatar","onSubmit","user","preventDefault","localStorage","setItem","JSON","stringify","push","placeholder","map","option","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","database","Container","ModeLink","Link","Mode","ModalBackground","ModalContent","ModalCloseButton","ModalTitle","p","ModePage","isJoinModalOpen","setIsJoinModalOpen","isCreateModalOpen","setIsCreateModalOpen","createRoomId","setCreateRoomId","joinRoomId","setJoinRoomId","reference","ref","orderByChild","isUserLogin","useEffect","handleJoinModalClick","handleCreateModalClick","to","onClick","equalTo","once","snapshot","val","roomID","set","ChatContainer","Chat","ChatName","Sidebar","aside","isSidebarOpen","CloseSidebarButton","MyselfInfo","MyselfImages","ul","li","Content","section","ChatContent","UserJoinChat","SelfMessage","SelfMessageContent","MessageContentContainer","UserImages","UserInfo","UserName","UserMessage","MessageContent","MessageContentTime","InputField","Emoji","SendButton","button","ChatPage","setIsSidebarOpen","setLatestMessage","messages","setMessages","currentMessage","setCurrentMessage","roomId","useParams","userData","parse","getItem","on","objectResponse","arrayData","Object","keys","_","getMessageData","writeOnlineState","isSystemMessage","enterChatRoom","message","Date","timestamp","toLocaleTimeString","hour","minute","hour12","sendMessage","App","Provider","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01792afb.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  html {\n    font-size: 16px;\n  }\n\n  body {\n    margin: 0;\n    padding: 0;\n    height: 100%;\n    font-family: 'Noto Sans TC', Open-Sans, Arial;\n    font-weight: 400;\n    background: #e9e9e9;\n    color: #505050;\n    transition: all 0.5s linear;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  h1, p {\n    margin: 0;\n  }\n\n  input,\n  input[type=\"button\"],\n  input[type=\"submit\"],\n  input[type=\"file\"],\n  input[type=\"reset\"],\n  button,\n  textarea,\n  select {\n    outline: none;\n    letter-spacing: 1px;\n    appearance: none;\n    outline-style: none;\n    -webkit-appearance: none;\n  }\n\n  input, textarea {\n    resize: none;\n  }\n`;\n\nexport default GlobalStyle;\n","import styled from \"styled-components\";\n\nconst FooterContainer = styled.footer`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  height: 60px;\n  color: #b6b6b6;\n  font-size: 0.875rem;\n`;\n\nconst AuthorLink = styled.a`\n  margin-left: 5px;\n  color: #b6b6b6;\n  text-decoration: none;\n  transition: 0.3s;\n\n  &:hover {\n    color: #555555;\n  }\n`;\n\nexport default function Footer() {\n  return (\n    <FooterContainer>\n      <p>Made with by </p>\n      <AuthorLink href=\"https://github.com/milyzoo\" target=\"_blank\" rel=\"noreferrer\">@milyzoo</AuthorLink>\n      <p>.</p>\n    </FooterContainer>\n  );\n}\n","export const MEDIA_QUERY_SM = \"@media (max-width: 575px)\";\nexport const MEDIA_QUERY_MD = \"@media (max-width: 768px)\";\nexport const MEDIA_QUERY_LG = \"@media (max-width: 1280px)\";\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 60px); /* 減去 footer + header */\n`;\n\nexport const SubmitButton = styled.input`\n  padding: 12px;\n  border-radius: 50px;\n  width: 100%;\n  border: none;\n  background-color: #00b9a3;\n  color: #ffffff;\n  font-size: 1.125rem;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    background-color: #00ad98;\n  }\n`;\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);","const USER_NAME = \"user\";\n\nexport const setUser = (user) => {\n  localStorage.setItem(USER_NAME, JSON.stringify(user));\n};\n\nexport const getUser = () => {\n  return localStorage.getItem(USER_NAME);\n};\n\nexport const scrollToTop = () => window.scrollTo(0, 0);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Avatar = styled.div`\n  margin-bottom: 10px;\n  width: 30px;\n  height: 30px;\n  background-color: ${(props) => props.background};\n  border-radius: 50%;\n  cursor: pointer;\n`;\n\nconst AvatarInput = styled.input`\n  display: none;\n  border: none;\n`;\n\nconst OptionButton = styled.div`\n  position: relative;\n  width: 14px;\n  height: 14px;\n  border: 2px solid #aaaaaa;\n  border-radius: 50%;\n  cursor: pointer;\n\n  &::after {\n    position: absolute;\n    content: \"\";\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 7px;\n    height: 7px;\n    border-radius: 50%;\n    background-color: #aaaaaa;\n    transition: all 0.3s;\n    opacity: 0;\n  }\n`;\n\nconst Option = styled.label`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & + & {\n    margin-left: 30px;\n  }\n\n  input:checked + ${OptionButton}::after {\n    opacity: 1;\n  }\n`;\n\nexport default function AvatarOptionInput({\n  id,\n  background,\n  handleUserInfoChange\n}) {\n\n  return (\n    <>\n      <Option htmlFor={id}>\n        <Avatar background={background} />\n        <AvatarInput\n          type=\"radio\"\n          name=\"avatar\"\n          id={id}\n          value={background}\n          onChange={handleUserInfoChange}\n        />\n        <OptionButton />\n      </Option>\n    </>\n  );\n}\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\nimport { MEDIA_QUERY_SM } from '../../constants/breakpoint';\nimport { Wrapper, SubmitButton } from '../../constants/mainStyle';\nimport { AuthContext } from '../../contexts';\nimport { setUser } from '../../utils';\nimport AvatarOptionInput from './../../components/AvatarOptionInput';\n\nconst Form = styled.form`\n  padding: 40px;\n  width: 400px;\n  background-color: #f5f5f5;\n  border-radius: 20px;\n  box-shadow: 0 10px 60px rgba(0, 0, 0, 0.05);\n\n  ${MEDIA_QUERY_SM} {\n    width: 90%;\n  }\n`;\n\nconst Title = styled.h1`\n  margin-bottom: 40px;\n  color: #00b9a3;\n  font-size: 1.875rem;\n  font-weight: 900;\n  text-align: center;\n`;\n\nconst InputContainer = styled.div`\n  margin: 0 0 30px 0;\n`;\n\nconst InputErrorText = styled.span`\n  margin-left: 20px;\n  color: #d62f39;\n`;\n\nconst Input = styled.input`\n  margin-top: 10px;\n  padding: 10px;\n  width: 100%;\n  height: 45px;\n  border: 1px solid transparent;\n  border-radius: 8px;\n  font-size: 1rem;\n  color: #505050;\n  background-color: #ffffff;\n  transition: all 0.3s;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n\n  &:focus {\n    border: 1px solid #00b9a3;\n  }\n`;\n\nconst AvatarContainer = styled.div`\n  display: flex;\n  margin: 10px 0 30px 0;\n`;\n\nexport default function HomePage() {\n  const [errorMessages, setErrorMessages] = useState('');\n  const { setIsUserLogin, currentUser, setCurrentUser } = useContext(AuthContext);\n  const history = useHistory();\n\n  const avatarbackground = [\n    { id: \"option1\", background: '#e0969b' },\n    { id: \"option2\", background: '#b59a92' },\n    { id: \"option3\", background: '#77bce2' },\n    { id: \"option4\", background: '#93a5d2' },\n  ];\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!currentUser.username && !currentUser.avatar) {\n      setErrorMessages('資料填寫不齊全');\n      return;\n    } else if (!currentUser.username) {\n      setErrorMessages('尚未填寫名字');\n      return;\n    } else if (!currentUser.avatar) {\n      setErrorMessages('尚未選擇頭貼');\n      return;\n    }\n    setErrorMessages('');\n    setUser(currentUser);\n    setIsUserLogin(true);\n    history.push('/mode');\n  };\n\n  const handleUserInfoChange = (e) => {\n    switch (e.target.name) {\n      case 'username':\n        setCurrentUser({\n          ...currentUser,\n          username: e.target.value,\n        });\n        setErrorMessages('');\n        break;\n      case 'avatar':\n        setCurrentUser({\n          ...currentUser,\n          avatar: e.target.value,\n        });\n        setErrorMessages('');\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <Wrapper>\n      <Form onSubmit={handleSubmit}>\n        <Title>NIMIN CHAT</Title>\n        <InputContainer>\n          <label htmlFor=\"username\">\n            名字\n            {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n          </label>\n          <Input\n            id=\"username\"\n            name=\"username\"\n            placeholder=\"請填寫名字\"\n            onChange={handleUserInfoChange}\n          />\n        </InputContainer>\n        <p>選擇頭貼</p>\n        <AvatarContainer>\n          {avatarbackground.map((option) => (\n            <AvatarOptionInput\n              key={option.id}\n              id={option.id}\n              handleUserInfoChange={handleUserInfoChange}\n              background={option.background}\n            />\n          ))}\n        </AvatarContainer>\n        <SubmitButton type=\"submit\" value=\"進入聊天室\" />\n      </Form>\n    </Wrapper>\n  );\n}\n","// import firebase from 'firebase'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\"; // Realtime Database\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDXEot_nTMfTpJVR4lfaCuqm74Uz8laHCQ\",\n  authDomain: \"nimin-chat.firebaseapp.com\",\n  databaseURL: \"https://nimin-chat-default-rtdb.firebaseio.com\",\n  projectId: \"nimin-chat\",\n  storageBucket: \"nimin-chat.appspot.com\",\n  messagingSenderId: \"612479268903\",\n  appId: \"1:612479268903:web:6bd28ec327da23617bf602\",\n};\n\nfirebase.initializeApp(firebaseConfig); // 初始化 Firebase\n// const db = firebase.firestore(); // 取得資料庫\nconst database = firebase.database(); // 取得資料庫\n\nexport default database;\n","import React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { MEDIA_QUERY_SM } from '../../constants/breakpoint';\nimport { Wrapper, SubmitButton } from '../../constants/mainStyle';\nimport { Link } from 'react-router-dom';\nimport { FaUsers as UsersIcon, FaDoorOpen as DoorIcon } from 'react-icons/fa';\nimport { BiMessageAdd as MessageAddIcon } from 'react-icons/bi';\nimport { IoIosClose as CloseIcon } from 'react-icons/io';\nimport { useHistory } from 'react-router-dom';\nimport { addChatRoom } from '../../WebAPI'\nimport firebase from 'firebase';\nimport { AuthContext } from '../../contexts';\nimport { scrollToTop } from '../../utils';\n\nconst Container = styled.div`\n  width: 280px;\n`;\n\nconst ModeLink = styled(Link)`\n  display: block;\n  text-decoration: none;\n`\n\nconst Mode = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 40px;\n  padding: 30px 0;\n  background-color: #fff;\n  border-radius: 20px;\n  font-size: 1.5rem;\n  font-weight: 500;\n  color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  &:hover {\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n    background-color: #00b9a3;\n    color: #ffffff;\n  }\n\n  svg {\n    width: auto;\n    height: 40px;\n  }\n`\n\nconst ModalBackground = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n`\n\nconst ModalContent = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 50px 80px;\n  width: 33%;\n  min-width: 480px;\n  background-color: #ffffff;\n  border-radius: 20px;\n  box-shadow: 0 0 50px 0 rgba(0, 0, 0, 0.1);\n\n  ${MEDIA_QUERY_SM} {\n    padding: 40px;\n    width: 90%;\n    min-width: auto;\n  }\n`\n\nconst ModalCloseButton = styled.div`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: 2px solid #00b9a3;\n  color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &:hover {\n    background-color: #00b9a3;\n    color: #ffffff;\n  }\n`\n\nconst ModalTitle = styled.p`\n  margin-bottom: 40px;\n  background-color: #ffffff;\n  color: #00b9a3;\n  font-size: 1.5rem;\n  font-weight: 500;\n  text-align: center;\n`\n\nconst InputContainer = styled.div`\n  margin-bottom: 40px;\n`\n\nconst InputErrorText = styled.span`\n  margin-left: 20px;\n  color: #d62f39;\n`\n\nconst Input = styled.input`\n  margin-top: 10px;\n  padding: 10px;\n  width: 100%;\n  height: 45px;\n  border: 1px solid transparent;\n  border-radius: 8px;\n  font-size: 1rem;\n  color: #505050;\n  background-color: #f5f5f5;\n  transition: 0.3s;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n\n  &:focus {\n    border: 1px solid #00b9a3;\n  }\n`\n\nexport default function ModePage() {\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState(false)\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\n  const [createRoomId, setCreateRoomId] = useState('')\n  const [joinRoomId, setJoinRoomId] = useState('')\n  const [errorMessages, setErrorMessages] = useState('');\n  const history = useHistory();\n  const reference = firebase.database().ref('chats').orderByChild('roomID')\n  const { isUserLogin } = useContext(AuthContext)\n\n  useEffect(() => {\n    if (!isUserLogin) {\n      history.push('/');\n      return\n    }\n  }, [history, isUserLogin])\n\n  scrollToTop();\n\n  const handleJoinModalClick = () => {\n    setIsJoinModalOpen(!isJoinModalOpen);\n    setErrorMessages('');\n  };\n\n  const handleCreateModalClick = () => {\n    setIsCreateModalOpen(!isCreateModalOpen);\n    setErrorMessages('');\n  };\n\n  const handleJoinRoomSubmit = e => {\n    e.preventDefault();\n\n    reference.equalTo(joinRoomId).once('value', (snapshot) => {\n      if (!joinRoomId) {\n        setErrorMessages('尚未輸入房間編號');\n        return\n      }\n\n      if (!snapshot.val()) {\n        setErrorMessages('此房間不存在');\n        return\n      }\n      \n      history.push(`/chat/${joinRoomId}`);\n    })\n  }\n\n  const handleCreateRoomSubmit = e => {\n    e.preventDefault();\n\n    reference.equalTo(createRoomId).once('value', (snapshot) => {\n      if (!createRoomId) {\n        setErrorMessages('尚未輸入房間編號');\n        return\n      }\n\n      if (snapshot.val()) {\n        setErrorMessages('此房間已存在');\n        return\n      }\n      \n      addChatRoom(createRoomId)\n      history.push(`/chat/${createRoomId}`);\n    })\n  }\n  \n  const handleCreateRoomIDChange = e => {\n    setCreateRoomId(e.target.value);\n  }\n  \n  const handleJoinRoomIDChange = e => {\n    setJoinRoomId(e.target.value);\n  }\n\n  return (\n    <Wrapper>\n      <Container>\n        <ModeLink to=\"/chat/lobby\">\n          <Mode>\n            <UsersIcon />\n            聊天大廳\n          </Mode>\n        </ModeLink>\n        <Mode onClick={handleJoinModalClick}>\n          <DoorIcon />\n          加入房間\n        </Mode>\n        { isJoinModalOpen && (\n          <>\n            <ModalBackground onClick={handleJoinModalClick} />\n            <ModalContent>\n              <ModalCloseButton onClick={handleJoinModalClick}><CloseIcon /></ModalCloseButton>\n              <ModalTitle>加入房間</ModalTitle>\n              <form onSubmit={handleJoinRoomSubmit}>\n                <InputContainer>\n                  <label htmlFor=\"room-id\">\n                    房間編號\n                    {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n                  </label>\n                  <Input id=\"room-id\" placeholder=\"請輸入房間編號\" onChange={handleJoinRoomIDChange} />\n                </InputContainer>\n                <SubmitButton type=\"submit\" value=\"加入\" />\n              </form>\n            </ModalContent>\n          </>\n        )}\n        <Mode onClick={handleCreateModalClick}>\n          <MessageAddIcon />\n          創建房間\n        </Mode>\n        { isCreateModalOpen && (\n          <>\n            <ModalBackground onClick={handleCreateModalClick} />\n            <ModalContent>\n              <ModalCloseButton onClick={handleCreateModalClick}><CloseIcon /></ModalCloseButton>\n              <ModalTitle>創建房間</ModalTitle>\n              <form onSubmit={handleCreateRoomSubmit}>\n                <InputContainer>\n                  <label htmlFor=\"room-id\">\n                    房間編號\n                    {errorMessages && <InputErrorText>{errorMessages}</InputErrorText>}\n                  </label>\n                  <Input id=\"room-id\" placeholder=\"請輸入房間編號\" onChange={handleCreateRoomIDChange} />\n                </InputContainer>\n                <SubmitButton type=\"submit\" value=\"建立\" />\n              </form>\n            </ModalContent>\n          </>\n        )}\n      </Container>\n    </Wrapper>\n  );\n}","import database from './config';\n\nexport const addChatRoom = (roomID) => {\n  database.ref(`chats/${roomID}`).set({\n    roomID\n  });\n}\n  \nexport const enterChatRoom = (roomId, username, isSystemMessage) => {\n  database.ref(`messages/${roomId}`).push({\n    id: {  \n      '.sv':'timestamp'\n    },\n    username,\n    isSystemMessage,\n  });\n}\n  \nexport const sendMessage = ({ roomId, message, username, avatar, isSystemMessage }) => {\n  database.ref(`messages/${roomId}`).push({\n    id: {  \n      '.sv':'timestamp'\n    },\n    message,\n    timestamp: {  \n      '.sv':'timestamp'\n    },\n    username,\n    avatar,\n    isSystemMessage,\n  });\n}\n  \nexport const writeOnlineState = (roomId, username) => {\n  database.ref(`onlineUser/${roomId}`).push({\n    username,\n  });\n}\n","import React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { MEDIA_QUERY_SM } from '../../constants/breakpoint';\nimport { Wrapper } from '../../constants/mainStyle';\nimport { FiSmile as EmojiIcon } from 'react-icons/fi';\nimport { IoCloseCircle as ChatCloseIcon, IoSend as SendIcon } from 'react-icons/io5';\nimport { RiArrowLeftSLine as ArrowLeftIcon } from 'react-icons/ri';\nimport { AuthContext } from '../../contexts';\nimport { useParams, useHistory } from 'react-router-dom';\nimport database from '../../config';\nimport { getUser, scrollToTop } from '../../utils'\nimport { enterChatRoom, sendMessage, writeOnlineState } from '../../WebAPI'\n\nconst ChatContainer = styled.div`\n  margin-top: 40px;\n  padding: 20px;\n  width: 100%;\n  max-width: 840px;\n  height: 650px;\n\n  ${MEDIA_QUERY_SM} {\n    height: calc((100vh - 60px) *0.8)\n  }\n`\n\nconst Chat = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  padding: 20px;\n  height: 100%;\n  background-color: #f5f5f5;\n  border-radius: 20px;\n`\n\nconst ChatName = styled.div`\n  position: absolute;\n  top: -40px;\n  left: 20px;\n  display: flex;\n  align-items: center;\n  padding: 0 20px 0 70px;\n  line-height: 40px;\n  background-color: #cccccc;\n  border-radius: 10px 10px 0 0;\n  font-size: 0.9375rem;\n  \n  svg {\n    margin-left: 50px;\n    width: 20px;\n    height: 20px;\n    cursor: pointer;\n    transition: 0.3s;\n\n    &:hover {\n      color: #d62f39;\n    }\n  }\n`\n\nconst Sidebar = styled.aside`\n  position: relative;\n  padding: 20px;\n  width: 180px;\n  height: 100%;\n  background-color: #fff;\n  border-radius: 15px;\n  display: ${props => props.isSidebarOpen ? \"block\" : \"none\"};\n\n  ${MEDIA_QUERY_SM} {\n    display: ${props => props.isSidebarOpen ? \"none\" : \"block\"};\n    width: ${props => props.isSidebarOpen ? \"0\" : \"100%\"};\n  }\n`\n\nconst CloseSidebarButton = styled.div`\n  position: absolute;\n  left: 0;\n  bottom: 75px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 30px;\n  border-radius: 0 50% 50% 0;\n  font-size: 1.375rem;\n  color: #505050;\n  background-color: #cccccc;\n  cursor: pointer;\n  z-index: 1;\n\n  svg {\n    transition: 0.3s;\n    transform: ${props => props.isSidebarOpen ? \"rotate(0)\" : \"rotate(180deg)\" };\n  }\n`\n\nconst MyselfInfo = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e9e9e9;\n`\n\nconst OnlineUsers = styled.p`\n  font-size: 0.815rem;\n  color: #aaaaaa;\n`\n\nconst UserList = styled.ul`\n  margin: 20px 0 0 0;\n  padding: 0;\n  list-style: none;\n  font-size: 0.9375rem;\n`\n\nconst User = styled.li`\n  position: relative;\n  padding-left: 13px;\n\n  &::before {\n    position: absolute;\n    content: \"\";\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background-color: #00b9a3;\n  }\n\n  & + & {\n    margin-top: 10px;\n  }\n`\n\nconst MyselfImages = styled.div`\n  width: 18px;\n  height: 18px;\n  margin-right: 8px;\n  background-color: ${props => props.avatar};\n  border-radius: 50%;\n`\n\nconst Content = styled.section`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  width: ${props => props.isSidebarOpen ? \"calc(100% - 200px)\" : \"100%\"};\n\n  ${MEDIA_QUERY_SM} {\n    display: ${props => props.isSidebarOpen ? \"flex\" : \"none\"};\n    width: ${props => props.isSidebarOpen ? \"100%\" : \"0\"};\n  }\n`\n\nconst ChatContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 10px;\n  height: calc(100% - 70px);\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n \n  &::-webkit-scrollbar-track {\n    background-color: #e9e9e9;\n    border-radius: 100px;\n  }\n \n  &::-webkit-scrollbar-thumb {\n    background-color: #cccccc;\n    border-radius: 100px;\n  }\n`\n\nconst UserJoinChat = styled.p`\n  display: inline-block;\n  padding: 5px 15px;\n  background-color: #e9e9e9;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  margin: 7.5px 0;\n`\n\nconst SelfMessage = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  margin: 7.5px 0 7.5px auto;\n  max-width: 80%;\n\n  ${MEDIA_QUERY_SM} {\n    display: -webkit-box;\n    max-width: 100%;\n  }\n`\n\nconst SelfMessageContent = styled.p`\n  padding: 7px 15px;\n  margin-left: 10px;\n  max-width: calc(100% - 64px);\n  height: fit-content;\n  background-color: #00b9a3;\n  color: #ffffff;\n  border-radius: 10px 0 10px 10px;\n  word-wrap: break-word;\n`\n\nconst MessageContentContainer = styled.div`\n    display: flex;\n    margin: 7.5px auto 7.5px 0;\n    max-width: 80%;\n\n  ${MEDIA_QUERY_SM} {\n    display: -webkit-box;\n    width: 100%;\n    max-width: 100%;\n  }\n`\n\nconst UserImages = styled.div`\n  margin-right: 10px;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  background-color: ${props => props.background};\n`\n\nconst UserInfo = styled.div`\n  width: calc(100% - 40px);\n`\n\nconst UserName = styled.p`\n  margin-bottom: 5px;\n  color: #aaaaaa;\n  font-size: 0.8125rem;\n`\n\nconst UserMessage = styled.div`\n  display: flex;\n  align-items: flex-end;\n`\n\nconst MessageContent = styled.p`\n  margin-right: 10px;\n  padding: 7px 15px;\n  max-width: calc(100% - 64px);\n  background-color: #fff;\n  border-radius: 0 10px 10px 10px;\n  word-wrap: break-word;\n`\n\nconst MessageContentTime = styled.p`\n  font-size: 0.75rem;\n  color: #aaaaaa;\n\n  ${MEDIA_QUERY_SM} {\n    display: -webkit-flex;\n    align-items: flex-end;\n  }\n`\n\nconst InputField = styled.form`\n  position: relative;\n`\n\nconst Input = styled.input`\n  border: transparent;\n  padding: 0 75px 0 55px;\n  width: 100%;\n  height: 50px;\n  border-radius: 50px;\n  background-color: #fff;\n  font-size: 1rem;\n\n  &::placeholder {\n    color: #cccccc;\n  }\n`\n\nconst Emoji = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 20px;\n  transform: translateY(-50%);\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  \n  svg {\n    width: 100%;\n    color: #cccccc;\n  }\n`\n\nconst SendButton = styled.button`\n  position: absolute;\n  top: 50%;\n  right: 20px;\n  transform: translateY(-50%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: none;\n  background-color: #00b9a3;\n  cursor: pointer;\n  transition: 0.3s;\n\n  svg {\n    color: #fff;\n  }\n\n  &:hover {\n    background-color: #00ad98;\n  }\n`\n\nexport default function ChatPage() {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [latestmessage, setLatestMessage] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [currentMessage, setCurrentMessage] = useState([]);\n  // const [onlineUserList, setOnlineUserList] = useState([]);\n  const { isUserLogin, currentUser } = useContext(AuthContext);\n  const { roomId } = useParams();\n  const history = useHistory();\n  const userData = JSON.parse(getUser('user'));\n  \n  const getMessageData = (roomId) => {\n    database.ref(`messages/${roomId}`).on('value', (snapshot) => {\n      const objectResponse = snapshot.val();\n      if (objectResponse) {\n        const arrayData = Object.keys(objectResponse).map((_) => objectResponse[_]);\n        setLatestMessage(arrayData);\n        setMessages(arrayData);\n      }\n    })\n  }\n  \n  // const getOnlineUser = (roomId) => {\n  //   database.ref(`onlineUser/${roomId}`).limitToLast(1).on('value', (snapshot) => {\n  //     const objectResponse = snapshot.val();\n  //     if (objectResponse) {\n  //       const arrayData = Object.keys(objectResponse).map((_) => objectResponse[_]);\n  //       console.log(arrayData)\n  //       setOnlineUserList([\n  //         ...onlineUserList,\n  //         arrayData[0]\n  //       ])\n  //     }\n  //   })\n  // }\n\n  useEffect(() => {\n    if (!isUserLogin) {\n      history.push('/');\n      return\n    }\n\n    scrollToTop();\n\n    getMessageData(roomId);\n    writeOnlineState(roomId, userData.username);\n    enterChatRoom(roomId, userData.username, true);\n  }, [history, isUserLogin, roomId, userData.username, userData.avatar])\n\n  const handleSidebarOpen = () => {\n    setIsSidebarOpen(!isSidebarOpen);\n  }\n\n  const handleInputChange = e => {\n    setCurrentMessage(e.target.value);\n  }\n\n  const handleMessageSubmit = e => {\n    e.preventDefault();\n    if (!currentMessage) return\n\n    sendMessage({ \n      roomId, \n      message: currentMessage, \n      username: userData.username,\n      avatar: userData.avatar,\n      isSystemMessage: false\n    })\n\n    setCurrentMessage('')\n  }\n\n  return (\n    <Wrapper>\n      <ChatContainer>\n        <Chat>\n          <ChatName>\n            { roomId === 'lobby' ? '聊天大廳' : `房間編號 ${roomId}`}\n            <ChatCloseIcon />\n          </ChatName>\n          <Sidebar isSidebarOpen={isSidebarOpen}>\n            <MyselfInfo>\n              <MyselfImages avatar={userData.avatar} />\n              {userData.username}\n            </MyselfInfo>\n            {/* <OnlineUsers>線上人數 {onlineUserList.length} 人</OnlineUsers>\n            <UserList>\n              { onlineUserList.map(user => <User>{user.username}</User>)}\n            </UserList> */}\n          </Sidebar>\n          <CloseSidebarButton onClick={handleSidebarOpen} isSidebarOpen={isSidebarOpen}>\n            <ArrowLeftIcon />\n          </CloseSidebarButton>\n          <Content isSidebarOpen={isSidebarOpen}>\n            <ChatContent>\n              { messages && messages.map(message => {\n                if (message.isSystemMessage) return (<UserJoinChat key={message.id}>{message.username + ' 加入聊天室'} </UserJoinChat>)\n                return currentUser.username === message.username && !message.isSystemMessage ? (\n                  <SelfMessage key={message.id}>\n                    <MessageContentTime>{new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12: true})}</MessageContentTime>\n                    <SelfMessageContent>{message.message}</SelfMessageContent>\n                  </SelfMessage>\n                ):(\n                  <MessageContentContainer key={message.id}>\n                      <UserImages background={message.avatar} />\n                      <UserInfo>\n                        <UserName>{message.username}</UserName>\n                        <UserMessage>\n                          <MessageContent>{message.message}</MessageContent>\n                          <MessageContentTime>{new Date(message.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12: true})}</MessageContentTime>\n                        </UserMessage>\n                      </UserInfo>\n                 </MessageContentContainer>\n                )\n              })}\n            </ChatContent>\n            <InputField onSubmit={handleMessageSubmit}>\n              <Emoji>\n                <EmojiIcon />\n              </Emoji>\n              <Input placeholder=\"輸入想說的話\" value={currentMessage} onChange={handleInputChange} />\n              <SendButton type=\"submit\">\n                <SendIcon />\n              </SendButton>\n            </InputField>\n          </Content>\n        </Chat>\n      </ChatContainer>\n    </Wrapper>\n  );\n}","import React, { useState } from \"react\";\nimport GlobalStyle from \"./constants/globalStyle\";\nimport Footer from \"./components/Footer\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport { HomePage, ModePage, ChatPage } from \"./pages\";\nimport { AuthContext } from \"./contexts\";\n\nexport default function App() {\n  const [isUserLogin, setIsUserLogin] = useState(false);\n  const [currentUser, setCurrentUser] = useState({\n    username: \"\",\n    avatar: \"\",\n  });\n\n  return (\n    <AuthContext.Provider value={{ isUserLogin, setIsUserLogin, currentUser, setCurrentUser }}>\n      <HashRouter>\n        <GlobalStyle />\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/mode\" component={ModePage} />\n          <Route path=\"/chat/:roomId\" component={ChatPage} />\n        </Switch>\n        <Footer />\n      </HashRouter>\n    </AuthContext.Provider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}